/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
 // frontend build.gradle

 plugins {
 	id "com.moowork.node" version "0.13"
 }
 apply plugin: 'war'



war {
    baseName = 'litige-front-app'
	archiveName = 'litige-front-app.war'
    version =  '1.0'
    manifest {
        attributes("Implementation-Title": baseName,
                   "Implementation-Version": version)
    }
	from 'dist/rootContent' // adds a file-set to the root of the archive
	webXml = file('conf/web.xml')
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenLocal()
    mavenCentral()
}

clean {
    dependsOn ":cleanAngular"
}


task installAngular(type:Exec) {
	if (System.getProperty("os.name").toUpperCase().contains("WINDOWS")){
		commandLine "npm.cmd", "install"
	} else {
		commandLine "npm", "install"
	}
}

task buildAngular(type:Exec) {
	if (System.getProperty("os.name").toUpperCase().contains("WINDOWS")){
		commandLine "npm.cmd", "run prod"
	} else {
		commandLine "npm", "run", "prod"
	}
}

task cleanAngular(type: Delete) {
  delete 'dist'
}

task cleanConf(type: Delete) {
  delete '.gradle'
}

